"use strict";function asyncGeneratorStep(t,e,a,n,r,o,s){try{var c=t[o](s),i=c.value}catch(t){return void a(t)}c.done?e(i):Promise.resolve(i).then(n,r)}function _asyncToGenerator(c){return function(){var t=this,s=arguments;return new Promise(function(e,a){var n=c.apply(t,s);function r(t){asyncGeneratorStep(n,e,a,r,o,"next",t)}function o(t){asyncGeneratorStep(n,e,a,r,o,"throw",t)}r(void 0)})}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}_toConsumableArray(document.getElementsByClassName("datetime")).forEach(function(t){var e=new Date(t.textContent),a=e.getDate(),n=capitalize(e.toLocaleString("default",{month:"long"})),r=(e.getFullYear(),e.getHours()),o=e.getMinutes().toString().padEnd(2,"0"),s="<span>".concat(a," ").concat(n,"</span><span>").concat(r,"h").concat(o," <span>-</span> ").concat(r+2,"h").concat(o,"</span>");t.innerHTML=s}),_toConsumableArray(document.getElementsByClassName("timestamp")).forEach(function(t){var e=new Date(t.textContent),a=e.getDate(),n=capitalize(e.toLocaleString("default",{month:"long"})),r=(e.getFullYear(),"".concat(a," ").concat(n));t.innerHTML=r});var articleEls=document.getElementsByTagName("article");_toConsumableArray(articleEls).forEach(function(t){t.onclick=function(){_toConsumableArray(articleEls).forEach(function(t){t.classList.remove("active")}),t.classList.add("active"),t.getElementsByClassName("article-content")[0].insertBefore(document.getElementById("map"),t.getElementsByClassName("main-button")[0]),marker.setPosition({lat:parseFloat(t.dataset.lat),lng:parseFloat(t.dataset.lng)})}});var taskButtonEls=document.getElementsByClassName("task-button"),containersEls=document.getElementsByClassName("container");function initGoogleMaps(){var t=document.getElementById("map"),e=t.parentNode.parentNode,a={lat:parseFloat(e.dataset.lat),lng:parseFloat(e.dataset.lng)};map=new google.maps.Map(t,{center:a,zoom:14,disableDefaultUI:!0,fullscreenControl:!0}),marker=new google.maps.Marker({position:a,map:map,draggable:!0,icon:{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z M -2,-30 a 2,2 0 1,1 4,0 2,2 0 1,1 -4,0",fillColor:"#CC1761",fillOpacity:1,strokeColor:"#CC1761",strokeWeight:3,scale:1.5}})}_toConsumableArray(taskButtonEls).forEach(function(t){t.onclick=function(){"encombrants"===t.dataset.task&&(taskButtonEls[0].classList.add("active"),containersEls[0].classList.add("active"),taskButtonEls[1].classList.remove("active"),containersEls[1].classList.remove("active"),containersEls[0].getElementsByTagName("article")[0].click()),"depots"===t.dataset.task&&(taskButtonEls[1].classList.add("active"),taskButtonEls[0].classList.remove("active"),containersEls[1].classList.add("active"),containersEls[0].classList.remove("active"),containersEls[1].getElementsByTagName("article")[0].click())}}),document.onclick=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var a,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.target.classList.contains("main-button"))return a=e.target.dataset.task,n=e.target.dataset.id,t.next=5,fetch("php/tasks/archiver-task?task=".concat(a,"&id=").concat(n));t.next=10;break;case 5:return r=t.sent,t.next=8,r.text();case 8:"success"===(r=t.sent)&&document.location.reload();case 10:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}();