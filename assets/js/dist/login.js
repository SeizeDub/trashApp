"use strict";function asyncGeneratorStep(e,t,n,r,o,a,s){try{var u=e[a](s),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function _asyncToGenerator(u){return function(){var e=this,s=arguments;return new Promise(function(t,n){var r=u.apply(e,s);function o(e){asyncGeneratorStep(r,t,n,o,a,"next",e)}function a(e){asyncGeneratorStep(r,t,n,o,a,"throw",e)}o(void 0)})}}var loginFormEl=document.getElementById("login-form");function loginRequest(){return _loginRequest.apply(this,arguments)}function _loginRequest(){return(_loginRequest=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new FormData(loginFormEl),e.next=3,fetch("php/tasks/login-task.php",{method:"POST",body:t});case 3:return n=e.sent,e.next=6,n.text();case 6:n=e.sent,e.t0=n,e.next="success"===e.t0?10:"error"===e.t0?12:"email"===e.t0?14:"password"===e.t0?16:"missing"===e.t0?18:20;break;case 10:return document.location.replace("index.php"),e.abrupt("break",20);case 12:return displayError(document.getElementById("submit-login"),"Une erreur est survenue."),e.abrupt("break",20);case 14:return displayError(document.getElementById("input-email"),"Adresse email inconnue."),e.abrupt("break",20);case 16:return displayError(document.getElementById("input-password"),"Mot de passe incorrect."),e.abrupt("break",20);case 18:return displayError(document.getElementById("submit-login"),"Un champ est manquant."),e.abrupt("break",20);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}loginFormEl.onsubmit=function(e){e.preventDefault(),loginRequest()};